<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.1">
    <title>First Class Html</title>
    <link rel='stylesheet' href='task.css' />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        clifford: '#da373d',
                        blue: {
                            DEFAULT: '#051956',
                            50: '#217FF2',
                            100: '#0E6FF0',
                            200: '#0C54CA',
                            300: '#093DA3',
                            400: '#07297D',
                            500: '#051956',
                            600: '#051556',
                            700: '#051256',
                            800: '#050E56',
                            900: '#050A56',
                            950: '#050956'
                        },
                        red: {
                            DEFAULT: '#CF2E39',
                            50: '#F2C3CC',
                            100: '#EEB2BD',
                            200: '#E7919E',
                            300: '#DF6F7D',
                            400: '#D84E5B',
                            500: '#CF2E39',
                            600: '#BA292F',
                            700: '#A52527',
                            800: '#902120',
                            900: '#7C1F1B',
                            950: '#711E19'
                        },
                        orange: {
                            DEFAULT: '#FE8C45',
                            50: '#FFF2E5',
                            100: '#FFE8D3',
                            200: '#FFD4B0',
                            300: '#FEBE8C',
                            400: '#FEA669',
                            500: '#FE8C45',
                            600: '#FE772C',
                            700: '#FE6112',
                            800: '#F54D01',
                            900: '#DC3F01',
                            950: '#CF3901'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id='header' class='slideDown bg-orange-400 text-white'>
        <h1 class='text-xl'>Header</h1>
    </div>
    <div id='container' class='flex'>
        <div id='sidebar' class='w-1/4 p-5 bg-orange-300 text-white'>
            <h1 class="text-lg">Sidebar</h1>
        </div>
        <div id='mainBox' class='flex-1 flex gap-10 p-6 bg-orange-100'>
            <div class='w-full lg:w-1/3'>
                <form id='taskForm' onsubmit='event.preventDefault(); submitCheckout();' class='flex flex-col gap-4'>
                    <label>Checkout Form</label>
                    <input type='text' name='first_name' required id='first_name' placeholder="Enter your first name"/>
                    <span style='color:red;' hidden id='taskErrorField-first_name'>This field is required</span>
                    <input type='text' name='last_name' required id='last_name' placeholder="Enter your last name"/>
                    <span style='color:red;' hidden id='taskErrorField-last_name'>This field is required</span>
                    <input type='tel' name='number' required id='number' placeholder="Enter your phone number"/>
                    <span style='color:red;' hidden id='taskErrorField-number'>This field is required</span>
                    <textarea id="address" name="address" placeholder="Enter your full address"></textarea>
                    <span style='color:red;' hidden id='taskErrorField-address'>This field is required</span>
                    <input type='email' name='email' required id='email' placeholder="Enter your email"/>
                    <span style='color:red;' hidden id='taskErrorField-email'>This field is required</span>
                    <input type='text' name='postal_code' required id='postal_code' placeholder="Enter your postal code"/>
                    <span style='color:red;' hidden id='taskErrorField-postal_code'>This field is required</span>
                    <select id="city" name="city">
                        <option selected>Karachi</option>
                        <option>Lahore</option>
                        <option>Islamabad</option>
                        <option>Peshawar</option>
                        <option>Multan</option>
                        <option>Quetta</option>
                    </select>
                    <span style='color:red;' hidden id='taskErrorField-city'>This field is required</span>
                    <select id="country" name="country">
                        <option selected>Pakistan</option>
                    </select>
                    <span style='color:red;' hidden id='taskErrorField-country'>This field is required</span>
                    <div class='Checkout Form'>
                        <label class="paymentLabel">
                            <input type='radio' name='payment_method' required id='payment_method_cash' checked/>
                            Cash on Delivery
                        </label>
                        <label class="paymentLabel">
                            <input type='radio' name='payment_method' required id='payment_method_online'/>
                            Online Payment
                        </label>
                    </div>
                    <button type='button' onclick="submitCheckout()" id='submitBtn' class='submitBtn bg-orange-500 text-white py-2 px-4 rounded'>Checkout</button>
                </form>
                <div>
                    <label>Cart Details</label>
                    <div id="boxList" class='p-6 bg-orange-100'></div>
                </div>
            </div>
            <div id='main' class='w-full lg:w-2/3'>
                <div class='grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4'>
                    <!-- Product items will be dynamically rendered here -->
                </div>
            </div>
        </div>
    </div>
    <script>
        const initialCheckoutForm = {
            first_name: '',
            last_name: '',
            phone_number: 0,
            address: '',
            email: '',
            postal_code: '',
            city: '',
            country: '',
            payment_method: '',
            shipping_details: {
                address:'',
                city: '',
                postal_code: '',
                country: '',
                phone_number: '',
                receiver_name: ''
            },
            total_amount: '',
            cart_details: [],
        }

        let checkoutForm = {...initialCheckoutForm};

        const products = [
            { id: 1, name: 'Water Bottle', description: 'Color: Blue, Size: Large', price: 350, discounted_price: 299, image: 'path/to/image1.jpg' },
            { id: 2, name: 'Mouse', description: 'Wired USB Port', price: 250, discounted_price: 199,  image: 'images/water-bottle.jpg' },
            { id: 3, name: 'Watch', description: 'Color: Black, Watch Type: Smart, Brand: Apple', price: 9000, discounted_price: 7999, image: 'path/to/image3.jpg' },
            { id: 4, name: 'Infinix S23', description: 'Color Blue, Storage: 120GB, RAM: 2GB, Display: 6x4', price: 25000, discounted_price: 24999, image: 'path/to/image4.jpg' },
            { id: 5, name: 'Shoes', description: 'Size: 8, Color Blue, Type: Sports Wear', price: 5000, discounted_price: 4700, image: 'path/to/image5.jpg' },
        ];

        function validateFields() {
            const basicFields = ['first_name', 'last_name', 'address', 'postal_code'];
            const basicValidation = () => {
                let checkValidation = true;
                basicFields.forEach(x => {
                    if(document.getElementById(x).value === '') {
                        checkValidation = false;
                        document.getElementById('taskErrorField-' + x).hidden = false;
                    } else {
                        document.getElementById('taskErrorField-' + x).hidden = true;
                    }
                });
                return checkValidation;
            }

            const testBasicValidation = basicValidation();
            if (!testBasicValidation) return false;

            const validatePhoneNumber = phoneNumber => /^(\+92|92|0)[ -]*\d{2,4}[ -]*\d{7,10}$/.test(phoneNumber);
            if (!validatePhoneNumber(document.getElementById('number').value)) {
                document.getElementById('taskErrorField-number').hidden = false;
                return false;
            } else {
                document.getElementById('taskErrorField-number').hidden = true;
            }

            const validateEmail = email => /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email);
            if (!validateEmail(document.getElementById('email').value)) {
                document.getElementById('taskErrorField-email').hidden = false;
                return false;
            } else {
                document.getElementById('taskErrorField-email').hidden = true;
            }

            return true;
        }

        function submitCheckout() {
            if (!validateFields()) return;

            const address = {
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                postal_code: document.getElementById('postal_code').value,
                country: document.getElementById('country').value,
                phone_number: document.getElementById('number').value,
                receiver_name: `${document.getElementById('first_name').value} ${document.getElementById('last_name').value}`
            };

            const paymentMethod = document.querySelector('input[name="payment_method"]:checked').id;

            checkoutForm = {
                ...checkoutForm,
                first_name: document.getElementById('first_name').value,
                last_name: document.getElementById('last_name').value,
                phone_number: document.getElementById('number').value,
                address: document.getElementById('address').value,
                email: document.getElementById('email').value,
                postal_code: document.getElementById('postal_code').value,
                city: document.getElementById('city').value,
                country: document.getElementById('country').value,
                payment_method: paymentMethod,
                shipping_details: address,
            }

            console.log(checkoutForm);
        }

        function renderProducts() {
            const container = document.querySelector('#main .grid');
            products.forEach(product => {
                const item = document.createElement('div');
                item.className = 'p-4 border bg-white rounded-lg';
                item.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="w-full h-32 object-cover mb-2"/>
                    <h3 class="text-lg font-semibold">${product.name}</h3>
                    <p class="text-sm text-gray-600">${product.description}</p>
                    <p class="text-md font-bold text-red-500">₨ ${product.discounted_price} <span class="line-through text-gray-500">₨ ${product.price}</span></p>
                    <button class="mt-2 bg-blue-500 text-white py-1 px-2 rounded">Add to Cart</button>
                `;
                container.appendChild(item);
            });
        }

        renderProducts();
    </script>
</body>
</html>
